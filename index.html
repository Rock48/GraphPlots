<!DOCTYPE html>
<html>
<head lang="en">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <meta charset="UTF-8">
    <title>Plots</title>
</head>
<body>
    <div class="container">
        <h1>The Plotter</h1>
        <canvas width="650" height="500" id="graphplot">Your browser does not support HTML 5 -- get Chrome.</canvas>
    </div>
    <div class="container">
        <p>Amount of points: <input type="text" class="input-sm" id="amt"/></p>
        <span id="values"></span>
    </div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="js/sprintf.min.js"></script>

    <!-- Code for page JQuery -->
    <script>
        var value = 0;
        var oldval = 0;
        var points = [];

        function update_values_amount() {
            var number_box = document.getElementById("amt");
            value = Number(number_box.value) <=45 ? Number(number_box.value) : 45;
            if(value != oldval) {
                var values_area = document.getElementById("values");
                values_area.innerHTML = "";
                for (var i = 0; i < value; i++) {


                    if(typeof points[i] === 'undefined') {
                        values_area.innerHTML += '<p>X: <input type="text" class="input-sm" id="x_' + i + '"/>&nbsp;&nbsp;&nbsp;&nbsp;Y: <input type="text" class="input-sm" id="y_' + i + '"/></p>';
                        points[i] = {
                            x: 0,
                            y: 0
                        };
                    } else {
                        values_area.innerHTML += '<p>X: <input type="text" value="'+points[i].x+'" class="input-sm" id="x_' + i + '"/>&nbsp;&nbsp;&nbsp;&nbsp;Y: <input type="text" value="'+points[i].y+'" class="input-sm" id="y_' + i + '"/></p>';
                    }

                }
            }
            oldval = value;
        };

        setInterval(function() {
            update_values_amount();
            for(var j = 0; j < value; j++) {
                var xdom = document.getElementById("x_" + j);
                var ydom = document.getElementById("y_" + j);

                points[j].x = Number(xdom.value);
                points[j].y = Number(ydom.value);
            }
        }, 100);

        //draw code

        c = document.getElementById("graphplot");
        ctx = c.getContext("2d");

        setInterval(function() {
            ctx.fillStyle = "#aaaaaa";
            ctx.fillRect(0,0,650,500);

            for(var i = 0; i < value; i++) {
                ctx.fillStyle = "#000000"
                ctx.fillRect(points[i].x-5,500-points[i].y-5,10,10);
            }
        }, 100);

        ctx.fillStyle = "#000000";
        ctx.fillText("Graph Goes Here", 280, 230);
    </script>

    <script src="js/bootstrap.min.js"></script>
</body>
</html>